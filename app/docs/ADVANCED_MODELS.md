# ğŸ›ï¸ Ø³ÛŒØ³ØªÙ… Ø¬Ø§Ù…Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ÛŒ Ø§ÛŒØ±Ø§Ù† - Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡

## ğŸ“‹ Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ø³ÛŒØ³ØªÙ…

Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³Ø§Ø®ØªØ§Ø± Ú©Ø§Ù…Ù„ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ±Ø§Ù† Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ùˆ Ø´Ø§Ù…Ù„ ØªÙ…Ø§Ù…ÛŒ Ø³Ø·ÙˆØ­ Ø³Ø§Ø²Ù…Ø§Ù†ÛŒØŒ Ù†Ù‚Ø´â€ŒÙ‡Ø§ØŒ Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ Ùˆ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ù†Ø¸Ø§Ù… Ø¢Ù…ÙˆØ²Ø´ Ø¹Ø§Ù„ÛŒ Ú©Ø´ÙˆØ± Ø§Ø³Øª.

## ğŸ—ï¸ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ…

### Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend Layer                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  React/Vue.js + TypeScript                        â”‚    â”‚
â”‚  â”‚  - Admin Dashboard                                 â”‚    â”‚
â”‚  â”‚  - Student Portal                                  â”‚    â”‚
â”‚  â”‚  - Faculty Portal                                  â”‚    â”‚
â”‚  â”‚  - Staff Portal                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   API Gateway Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  FastAPI + Nginx                                   â”‚    â”‚
â”‚  â”‚  - Load Balancing                                   â”‚    â”‚
â”‚  â”‚  - Rate Limiting                                    â”‚    â”‚
â”‚  â”‚  - Authentication Middleware                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Business Logic Layer                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  FastAPI Services                                 â”‚    â”‚
â”‚  â”‚  - User Management                                 â”‚    â”‚
â”‚  â”‚  - Academic Management                             â”‚    â”‚
â”‚  â”‚  - Financial Management                            â”‚    â”‚
â”‚  â”‚  - Research Management                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Data Layer                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  CockroachDB (OLTP)                               â”‚    â”‚
â”‚  â”‚  - Distributed SQL Database                        â”‚    â”‚
â”‚  â”‚  - ACID Transactions                               â”‚    â”‚
â”‚  â”‚  - Horizontal Scaling                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Redis (Cache & Session)                           â”‚    â”‚
â”‚  â”‚  - Session Storage                                 â”‚    â”‚
â”‚  â”‚  - API Response Cache                              â”‚    â”‚
â”‚  â”‚  - Rate Limiting                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  MinIO (Object Storage)                            â”‚    â”‚
â”‚  â”‚  - Document Storage                                â”‚    â”‚
â”‚  â”‚  - Media Files                                     â”‚    â”‚
â”‚  â”‚  - Backup Storage                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Streaming & Analytics Layer                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Apache Kafka                                       â”‚    â”‚
â”‚  â”‚  - Event Streaming                                  â”‚    â”‚
â”‚  â”‚  - Message Queue                                    â”‚    â”‚
â”‚  â”‚  - Real-time Analytics                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ClickHouse (OLAP)                                 â”‚    â”‚
â”‚  â”‚  - Analytical Queries                               â”‚    â”‚
â”‚  â”‚  - Real-time Reports                                â”‚    â”‚
â”‚  â”‚  - Data Warehousing                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Orchestration Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Apache Airflow                                     â”‚    â”‚
â”‚  â”‚  - ETL Pipelines                                    â”‚    â”‚
â”‚  â”‚  - Scheduled Tasks                                  â”‚    â”‚
â”‚  â”‚  - Data Processing                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Kubernetes                                         â”‚    â”‚
â”‚  â”‚  - Container Orchestration                          â”‚    â”‚
â”‚  â”‚  - Auto Scaling                                     â”‚    â”‚
â”‚  â”‚  - Service Discovery                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø¯Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡

### 1. Ø³Ø§Ø®ØªØ§Ø± Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ (Organizational Structure)

```python
# models/organization.py
from sqlalchemy import Column, Integer, String, Text, DateTime, ForeignKey, Boolean, JSON, Enum
from sqlalchemy.orm import relationship
from sqlalchemy.ext.declarative import declarative_base
from datetime import datetime
import enum

Base = declarative_base()

class UniversityType(enum.Enum):
    STATE = "Ø¯ÙˆÙ„ØªÛŒ"
    AZAD = "Ø¢Ø²Ø§Ø¯ Ø§Ø³Ù„Ø§Ù…ÛŒ"
    PAYAM_NOOR = "Ù¾ÛŒØ§Ù… Ù†ÙˆØ±"
    NON_PROFIT = "ØºÛŒØ±Ø§Ù†ØªÙØ§Ø¹ÛŒ"
    MEDICAL_SCIENCES = "Ø¹Ù„ÙˆÙ… Ù¾Ø²Ø´Ú©ÛŒ"
    TECHNICAL = "ÙÙ†ÛŒ Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ"
    RESEARCH_INSTITUTE = "Ù¾Ú˜ÙˆÙ‡Ø´Ú¯Ø§Ù‡"

class OrganizationalUnitType(enum.Enum):
    MINISTRY = "ÙˆØ²Ø§Ø±Øª"
    UNIVERSITY = "Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡"
    FACULTY = "Ø¯Ø§Ù†Ø´Ú©Ø¯Ù‡"
    DEPARTMENT = "Ú¯Ø±ÙˆÙ‡ Ø¢Ù…ÙˆØ²Ø´ÛŒ"
    RESEARCH_CENTER = "Ù¾Ú˜ÙˆÙ‡Ø´Ú©Ø¯Ù‡"
    ADMIN_UNIT = "ÙˆØ§Ø­Ø¯ Ø§Ø¯Ø§Ø±ÛŒ"
    SERVICE_CENTER = "Ù…Ø±Ú©Ø² Ø®Ø¯Ù…Ø§ØªÛŒ"
    HOSPITAL = "Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù†"
    CLINIC = "Ú©Ù„ÛŒÙ†ÛŒÚ©"

class University(Base):
    __tablename__ = 'universities'

    id = Column(Integer, primary_key=True, autoincrement=True)
    name = Column(String(255), nullable=False)
    name_fa = Column(String(255), nullable=False)
    type = Column(Enum(UniversityType), nullable=False)
    code = Column(String(20), unique=True, nullable=False)
    address = Column(Text)
    website = Column(String(255))
    phone = Column(String(20))
    establishment_year = Column(Integer)
    president_id = Column(Integer, ForeignKey('employees.id'))
    social_media_links = Column(JSON)
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # Relationships
    president = relationship("Employee", foreign_keys=[president_id])
    faculties = relationship("Faculty", back_populates="university")
    departments = relationship("Department", back_populates="university")
    research_centers = relationship("ResearchCenter", back_populates="university")
    admin_units = relationship("AdministrativeUnit", back_populates="university")
    employees = relationship("Employee", back_populates="university")
    students = relationship("Student", back_populates="university")

class Faculty(Base):
    __tablename__ = 'faculties'

    id = Column(Integer, primary_key=True, autoincrement=True)
    university_id = Column(Integer, ForeignKey('universities.id'), nullable=False)
    name = Column(String(255), nullable=False)
    name_fa = Column(String(255), nullable=False)
    code = Column(String(20), unique=True, nullable=False)
    dean_id = Column(Integer, ForeignKey('employees.id'))
    address = Column(Text)
    phone = Column(String(20))
    website = Column(String(255))
    establishment_year = Column(Integer)
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # Relationships
    university = relationship("University", back_populates="faculties")
    dean = relationship("Employee", foreign_keys=[dean_id])
    departments = relationship("Department", back_populates="faculty")

class Department(Base):
    __tablename__ = 'departments'

    id = Column(Integer, primary_key=True, autoincrement=True)
    faculty_id = Column(Integer, ForeignKey('faculties.id'), nullable=False)
    university_id = Column(Integer, ForeignKey('universities.id'), nullable=False)
    name = Column(String(255), nullable=False)
    name_fa = Column(String(255), nullable=False)
    code = Column(String(20), unique=True, nullable=False)
    head_id = Column(Integer, ForeignKey('employees.id'))
    field_of_study = Column(String(255))
    degree_levels = Column(JSON)  # ["Ú©Ø§Ø±Ø´Ù†Ø§Ø³ÛŒ", "Ú©Ø§Ø±Ø´Ù†Ø§Ø³ÛŒ Ø§Ø±Ø´Ø¯", "Ø¯Ú©ØªØ±ÛŒ"]
    capacity = Column(Integer)
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # Relationships
    faculty = relationship("Faculty", back_populates="departments")
    university = relationship("University", back_populates="departments")
    head = relationship("Employee", foreign_keys=[head_id])
    students = relationship("Student", back_populates="department")
    courses = relationship("Course", back_populates="department")

class ResearchCenter(Base):
    __tablename__ = 'research_centers'

    id = Column(Integer, primary_key=True, autoincrement=True)
    university_id = Column(Integer, ForeignKey('universities.id'), nullable=False)
    name = Column(String(255), nullable=False)
    name_fa = Column(String(255), nullable=False)
    code = Column(String(20), unique=True, nullable=False)
    director_id = Column(Integer, ForeignKey('employees.id'))
    research_field = Column(String(255))
    address = Column(Text)
    phone = Column(String(20))
    website = Column(String(255))
    budget = Column(JSON)  # Ø³Ø§Ù„Ø§Ù†Ù‡ Ø¨ÙˆØ¯Ø¬Ù‡
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # Relationships
    university = relationship("University", back_populates="research_centers")
    director = relationship("Employee", foreign_keys=[director_id])
    projects = relationship("ResearchProject", back_populates="research_center")

class AdministrativeUnit(Base):
    __tablename__ = 'administrative_units'

    id = Column(Integer, primary_key=True, autoincrement=True)
    university_id = Column(Integer, ForeignKey('universities.id'), nullable=False)
    name = Column(String(255), nullable=False)
    name_fa = Column(String(255), nullable=False)
    code = Column(String(20), unique=True, nullable=False)
    unit_type = Column(Enum(OrganizationalUnitType), nullable=False)
    manager_id = Column(Integer, ForeignKey('employees.id'))
    parent_id = Column(Integer, ForeignKey('administrative_units.id'))
    responsibilities = Column(JSON)
    address = Column(Text)
    phone = Column(String(20))
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # Relationships
    university = relationship("University", back_populates="admin_units")
    manager = relationship("Employee", foreign_keys=[manager_id])
    parent = relationship("AdministrativeUnit", remote_side=[id])
    children = relationship("AdministrativeUnit", back_populates="parent")
    employees = relationship("Employee", back_populates="admin_unit")
```

### 2. Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø³Ù†Ù„ÛŒ (Personnel Models)

```python
# models/personnel.py
from sqlalchemy import Column, Integer, String, Text, DateTime, ForeignKey, Boolean, JSON, Enum, Float
from sqlalchemy.orm import relationship
from sqlalchemy.ext.declarative import declarative_base
from datetime import datetime
import enum

class EmployeeType(enum.Enum):
    ACADEMIC = "Ù‡ÛŒØ£Øª Ø¹Ù„Ù…ÛŒ"
    ADMINISTRATIVE = "Ø§Ø¯Ø§Ø±ÛŒ"
    TECHNICAL = "ÙÙ†ÛŒ"
    SERVICE = "Ø®Ø¯Ù…Ø§ØªÛŒ"
    MEDICAL = "Ø¯Ø±Ù…Ø§Ù†ÛŒ"
    RESEARCH = "Ù¾Ú˜ÙˆÙ‡Ø´ÛŒ"

class AcademicRank(enum.Enum):
    INSTRUCTOR = "Ù…Ø±Ø¨ÛŒ"
    ASSISTANT_PROFESSOR = "Ø§Ø³ØªØ§Ø¯ÛŒØ§Ø±"
    ASSOCIATE_PROFESSOR = "Ø¯Ø§Ù†Ø´ÛŒØ§Ø±"
    PROFESSOR = "Ø§Ø³ØªØ§Ø¯"
    EMERITUS_PROFESSOR = "Ø§Ø³ØªØ§Ø¯ Ø¨Ø§Ø²Ù†Ø´Ø³ØªÙ‡"
    VISITING_PROFESSOR = "Ø§Ø³ØªØ§Ø¯ Ù…Ø¯Ø¹Ùˆ"

class EmploymentType(enum.Enum):
    PERMANENT = "Ø±Ø³Ù…ÛŒ"
    CONTRACT = "Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ÛŒ"
    PROJECT = "Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§ÛŒ"
    HOURLY = "Ø³Ø§Ø¹ØªÛŒ"
    VISITING = "Ù…Ù‡Ù…Ø§Ù†"
    RETIRED = "Ø¨Ø§Ø²Ù†Ø´Ø³ØªÙ‡"

class Position(Base):
    __tablename__ = 'positions'

    id = Column(Integer, primary_key=True, autoincrement=True)
    title = Column(String(255), nullable=False)
    title_fa = Column(String(255), nullable=False)
    code = Column(String(20), unique=True, nullable=False)
    employee_type = Column(Enum(EmployeeType), nullable=False)
    level = Column(String(50))  # Ø§Ø¬Ø±Ø§ÛŒÛŒØŒ Ø§Ø±Ø´Ø¯ØŒ Ù…ÛŒØ§Ù†ÛŒØŒ Ù¾Ø§ÛŒÙ‡
    authority_level = Column(Integer, default=1)  # 1-5
    base_salary = Column(Float)
    responsibilities = Column(JSON)
    requirements = Column(JSON)
    organizational_unit_id = Column(Integer, ForeignKey('organizational_units.id'))
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # Relationships
    organizational_unit = relationship("OrganizationalUnit", back_populates="positions")
    employees = relationship("Employee", back_populates="position")

class Employee(Base):
    __tablename__ = 'employees'

    id = Column(Integer, primary_key=True, autoincrement=True)
    national_id = Column(String(10), unique=True, nullable=False)
    first_name = Column(String(100), nullable=False)
    last_name = Column(String(100), nullable=False)
    first_name_fa = Column(String(100), nullable=False)
    last_name_fa = Column(String(100), nullable=False)
    email = Column(String(255), unique=True)
    phone = Column(String(20))
    mobile = Column(String(20))
    address = Column(Text)
    birth_date = Column(DateTime)
    gender = Column(Enum('MALE', 'FEMALE', name='gender_enum'))
    avatar = Column(String(500))

    # Employment Info
    employee_type = Column(Enum(EmployeeType), nullable=False)
    position_id = Column(Integer, ForeignKey('positions.id'))
    employment_type = Column(Enum(EmploymentType), nullable=False)
    hire_date = Column(DateTime)
    contract_end_date = Column(DateTime)
    base_salary = Column(Float)
    allowances = Column(JSON)  # ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡â€ŒÙ‡Ø§
    deductions = Column(JSON)  # Ú©Ø³ÙˆØ±Ø§Øª

    # Academic Info (for faculty)
    academic_rank = Column(Enum(AcademicRank))
    field_of_study = Column(String(255))
    education_level = Column(String(100))
    university_of_study = Column(String(255))
    graduation_year = Column(Integer)

    # Organizational Info
    university_id = Column(Integer, ForeignKey('universities.id'))
    faculty_id = Column(Integer, ForeignKey('faculties.id'))
    department_id = Column(Integer, ForeignKey('departments.id'))
    admin_unit_id = Column(Integer, ForeignKey('administrative_units.id'))
    research_center_id = Column(Integer, ForeignKey('research_centers.id'))

    # Status
    is_active = Column(Boolean, default=True)
    status = Column(String(50), default='ACTIVE')  # ACTIVE, INACTIVE, ON_LEAVE, RETIRED
    last_login = Column(DateTime)
    last_login_ip = Column(String(45))

    # Additional Info
    bio = Column(Text)
    skills = Column(JSON)
    languages = Column(JSON)
    certifications = Column(JSON)
    work_experience = Column(JSON)
    emergency_contact = Column(JSON)
    preferences = Column(JSON)

    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # Relationships
    position = relationship("Position", back_populates="employees")
    university = relationship("University", back_populates="employees")
    faculty = relationship("Faculty")
    department = relationship("Department")
    admin_unit = relationship("AdministrativeUnit", back_populates="employees")
    research_center = relationship("ResearchCenter")
    user_positions = relationship("UserPosition", back_populates="employee")
    permissions = relationship("EmployeePermission", back_populates="employee")
    access_logs = relationship("AccessLog", back_populates="employee")

class UserPosition(Base):
    __tablename__ = 'user_positions'

    id = Column(Integer, primary_key=True, autoincrement=True)
    employee_id = Column(Integer, ForeignKey('employees.id'), nullable=False)
    position_id = Column(Integer, ForeignKey('positions.id'), nullable=False)
    organizational_unit_id = Column(Integer, ForeignKey('organizational_units.id'))
    is_primary = Column(Boolean, default=True)
    start_date = Column(DateTime, default=datetime.utcnow)
    end_date = Column(DateTime)
    appointment_letter = Column(String(500))  # Ù…Ø³ÛŒØ± ÙØ§ÛŒÙ„
    notes = Column(Text)
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # Relationships
    employee = relationship("Employee", back_populates="user_positions")
    position = relationship("Position")
    organizational_unit = relationship("OrganizationalUnit")

class Permission(Base):
    __tablename__ = 'permissions'

    id = Column(Integer, primary_key=True, autoincrement=True)
    name = Column(String(100), unique=True, nullable=False)
    name_fa = Column(String(255), nullable=False)
    codename = Column(String(100), unique=True, nullable=False)
    category = Column(String(100))  # ACADEMIC, ADMINISTRATIVE, FINANCIAL, etc.
    description = Column(Text)
    module = Column(String(100))
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime, default=datetime.utcnow)

class EmployeePermission(Base):
    __tablename__ = 'employee_permissions'

    id = Column(Integer, primary_key=True, autoincrement=True)
    employee_id = Column(Integer, ForeignKey('employees.id'), nullable=False)
    permission_id = Column(Integer, ForeignKey('permissions.id'), nullable=False)
    organizational_unit_id = Column(Integer, ForeignKey('organizational_units.id'))
    granted_by_id = Column(Integer, ForeignKey('employees.id'))
    granted_at = Column(DateTime, default=datetime.utcnow)
    expires_at = Column(DateTime)
    reason = Column(Text)
    restrictions = Column(JSON)
    is_active = Column(Boolean, default=True)

    # Relationships
    employee = relationship("Employee", back_populates="permissions")
    permission = relationship("Permission")
    organizational_unit = relationship("OrganizationalUnit")
    granted_by = relationship("Employee", foreign_keys=[granted_by_id])

class AccessLog(Base):
    __tablename__ = 'access_logs'

    id = Column(Integer, primary_key=True, autoincrement=True)
    employee_id = Column(Integer, ForeignKey('employees.id'))
    action = Column(String(100), nullable=False)
    resource = Column(String(255), nullable=False)
    method = Column(String(10))  # GET, POST, PUT, DELETE
    status_code = Column(Integer)
    ip_address = Column(String(45))
    user_agent = Column(Text)
    session_id = Column(String(255))
    request_data = Column(JSON)
    response_data = Column(JSON)
    execution_time = Column(Float)  # milliseconds
    success = Column(Boolean, default=True)
    error_message = Column(Text)
    timestamp = Column(DateTime, default=datetime.utcnow)

    # Relationships
    employee = relationship("Employee", back_populates="access_logs")
```

### 3. Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ (Student Models)

```python
# models/students.py
from sqlalchemy import Column, Integer, String, Text, DateTime, ForeignKey, Boolean, JSON, Enum, Float
from sqlalchemy.orm import relationship
from sqlalchemy.ext.declarative import declarative_base
from datetime import datetime
import enum

class StudentType(enum.Enum):
    REGULAR = "Ø±ÙˆØ²Ø§Ù†Ù‡"
    EVENING = "Ø´Ø¨Ø§Ù†Ù‡"
    SELF_SUPPORTED = "Ù¾Ø±Ø¯ÛŒØ³ Ø®ÙˆØ¯Ú¯Ø±Ø¯Ø§Ù†"
    VIRTUAL = "Ù…Ø¬Ø§Ø²ÛŒ"
    PAYAM_NOOR = "Ù¾ÛŒØ§Ù… Ù†ÙˆØ±"
    NON_PROFIT = "ØºÛŒØ±Ø§Ù†ØªÙØ§Ø¹ÛŒ"
    AZAD = "Ø¢Ø²Ø§Ø¯ Ø§Ø³Ù„Ø§Ù…ÛŒ"
    INTERNATIONAL = "Ø¨ÛŒÙ†â€ŒØ§Ù„Ù…Ù„Ù„ÛŒ"

class AcademicLevel(enum.Enum):
    BACHELOR = "Ú©Ø§Ø±Ø´Ù†Ø§Ø³ÛŒ"
    MASTER = "Ú©Ø§Ø±Ø´Ù†Ø§Ø³ÛŒ Ø§Ø±Ø´Ø¯"
    PHD = "Ø¯Ú©ØªØ±ÛŒ ØªØ®ØµØµÛŒ"
    PROFESSIONAL_DOCTORATE = "Ø¯Ú©ØªØ±ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ"
    POSTDOC = "ÙÙˆÙ‚ Ø¯Ú©ØªØ±ÛŒ"

class AcademicStatus(enum.Enum):
    ACTIVE = "ÙØ¹Ø§Ù„"
    ON_LEAVE = "Ù…Ø±Ø®ØµÛŒ ØªØ­ØµÛŒÙ„ÛŒ"
    CONDITIONAL = "Ù…Ø´Ø±ÙˆØ·"
    GUEST = "Ù…Ù‡Ù…Ø§Ù†"
    TRANSFERRED = "Ø§Ù†ØªÙ‚Ø§Ù„ÛŒ"
    GRADUATED = "ÙØ§Ø±Øºâ€ŒØ§Ù„ØªØ­ØµÛŒÙ„"
    WITHDRAWN = "Ø§Ù†ØµØ±Ø§ÙÛŒ"
    SUSPENDED = "Ø§Ø®Ø±Ø§Ø¬"

class FinancialStatus(enum.Enum):
    REGULAR = "Ø¹Ø§Ø¯ÛŒ"
    SCHOLARSHIP = "Ø¨ÙˆØ±Ø³ÛŒÙ‡"
    LOAN_RECIPIENT = "ÙˆØ§Ù…â€ŒÚ¯ÛŒØ±Ù†Ø¯Ù‡"
    TUITION_DISCOUNT = "ØªØ®ÙÛŒÙ Ø´Ù‡Ø±ÛŒÙ‡"
    TUITION_EXEMPT = "Ù…Ø¹Ø§ÙÛŒØª Ø´Ù‡Ø±ÛŒÙ‡"

class Student(Base):
    __tablename__ = 'students'

    id = Column(Integer, primary_key=True, autoincrement=True)
    national_id = Column(String(10), unique=True, nullable=False)
    student_id = Column(String(20), unique=True, nullable=False)
    first_name = Column(String(100), nullable=False)
    last_name = Column(String(100), nullable=False)
    first_name_fa = Column(String(100), nullable=False)
    last_name_fa = Column(String(100), nullable=False)
    email = Column(String(255), unique=True)
    phone = Column(String(20))
    mobile = Column(String(20))
    address = Column(Text)
    birth_date = Column(DateTime)
    gender = Column(Enum('MALE', 'FEMALE', name='gender_enum'))
    avatar = Column(String(500))

    # Academic Info
    university_id = Column(Integer, ForeignKey('universities.id'), nullable=False)
    faculty_id = Column(Integer, ForeignKey('faculties.id'))
    department_id = Column(Integer, ForeignKey('departments.id'), nullable=False)
    academic_level = Column(Enum(AcademicLevel), nullable=False)
    student_type = Column(Enum(StudentType), nullable=False)
    entrance_year = Column(Integer, nullable=False)
    expected_graduation_year = Column(Integer)
    field_of_study = Column(String(255))
    major = Column(String(255))
    minor = Column(String(255))
    gpa = Column(Float)
    total_credits = Column(Float, default=0)
    completed_credits = Column(Float, default=0)

    # Status
    academic_status = Column(Enum(AcademicStatus), default=AcademicStatus.ACTIVE)
    financial_status = Column(Enum(FinancialStatus), default=FinancialStatus.REGULAR)
    is_active = Column(Boolean, default=True)

    # Financial Info
    tuition_fee = Column(Float)
    scholarships = Column(JSON)
    loans = Column(JSON)
    payments = Column(JSON)

    # Special Categories
    is_international = Column(Boolean, default=False)
    is_talented = Column(Boolean, default=False)
    is_martyr_family = Column(Boolean, default=False)
    is_disabled = Column(Boolean, default=False)
    is_athlete = Column(Boolean, default=False)
    is_married = Column(Boolean, default=False)
    is_employed = Column(Boolean, default=False)

    # Additional Info
    emergency_contact = Column(JSON)
    medical_info = Column(JSON)
    special_needs = Column(JSON)
    achievements = Column(JSON)
    activities = Column(JSON)
    languages = Column(JSON)
    skills = Column(JSON)

    # System Info
    last_login = Column(DateTime)
    last_login_ip = Column(String(45))
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # Relationships
    university = relationship("University", back_populates="students")
    faculty = relationship("Faculty")
    department = relationship("Department", back_populates="students")
    enrollments = relationship("CourseEnrollment", back_populates="student")
    grades = relationship("Grade", back_populates="student")
    access_logs = relationship("StudentAccessLog", back_populates="student")

class StudentSpecialCategory(Base):
    __tablename__ = 'student_special_categories'

    id = Column(Integer, primary_key=True, autoincrement=True)
    name = Column(String(255), nullable=False)
    name_fa = Column(String(255), nullable=False)
    description = Column(Text)
    benefits = Column(JSON)
    requirements = Column(JSON)
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime, default=datetime.utcnow)

class StudentCategoryAssignment(Base):
    __tablename__ = 'student_category_assignments'

    id = Column(Integer, primary_key=True, autoincrement=True)
    student_id = Column(Integer, ForeignKey('students.id'), nullable=False)
    category_id = Column(Integer, ForeignKey('student_special_categories.id'), nullable=False)
    assigned_by_id = Column(Integer, ForeignKey('employees.id'))
    assigned_at = Column(DateTime, default=datetime.utcnow)
    expires_at = Column(DateTime)
    notes = Column(Text)
    is_active = Column(Boolean, default=True)

    # Relationships
    student = relationship("Student")
    category = relationship("StudentSpecialCategory")
    assigned_by = relationship("Employee")

class StudentAccessLog(Base):
    __tablename__ = 'student_access_logs'

    id = Column(Integer, primary_key=True, autoincrement=True)
    student_id = Column(Integer, ForeignKey('students.id'))
    action = Column(String(100), nullable=False)
    resource = Column(String(255), nullable=False)
    method = Column(String(10))
    status_code = Column(Integer)
    ip_address = Column(String(45))
    user_agent = Column(Text)
    session_id = Column(String(255))
    request_data = Column(JSON)
    response_data = Column(JSON)
    execution_time = Column(Float)
    success = Column(Boolean, default=True)
    error_message = Column(Text)
    timestamp = Column(DateTime, default=datetime.utcnow)

    # Relationships
    student = relationship("Student", back_populates="access_logs")
```

### 4. Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ (Academic Models)

```python
# models/academic.py
from sqlalchemy import Column, Integer, String, Text, DateTime, ForeignKey, Boolean, JSON, Enum, Float
from sqlalchemy.orm import relationship
from sqlalchemy.ext.declarative import declarative_base
from datetime import datetime
import enum

class CourseType(enum.Enum):
    THEORETICAL = "Ù†Ø¸Ø±ÛŒ"
    PRACTICAL = "Ø¹Ù…Ù„ÛŒ"
    THEORETICAL_PRACTICAL = "Ù†Ø¸Ø±ÛŒ-Ø¹Ù…Ù„ÛŒ"
    WORKSHOP = "Ú©Ø§Ø±Ú¯Ø§Ù‡"
    SEMINAR = "Ø³Ù…ÛŒÙ†Ø§Ø±"
    PROJECT = "Ù¾Ø±ÙˆÚ˜Ù‡"

class CourseStatus(enum.Enum):
    ACTIVE = "ÙØ¹Ø§Ù„"
    INACTIVE = "ØºÛŒØ±ÙØ¹Ø§Ù„"
    CANCELLED = "Ù„ØºÙˆ Ø´Ø¯Ù‡"

class Semester(Base):
    __tablename__ = 'semesters'

    id = Column(Integer, primary_key=True, autoincrement=True)
    name = Column(String(100), nullable=False)  # 1402-01
    name_fa = Column(String(100), nullable=False)  # Ø¨Ù‡Ø§Ø± Û±Û´Û°Û²
    year = Column(Integer, nullable=False)
    season = Column(Enum('SPRING', 'SUMMER', 'FALL', 'WINTER', name='season_enum'))
    start_date = Column(DateTime, nullable=False)
    end_date = Column(DateTime, nullable=False)
    registration_start = Column(DateTime)
    registration_end = Column(DateTime)
    withdrawal_deadline = Column(DateTime)
    is_active = Column(Boolean, default=False)
    is_current = Column(Boolean, default=False)
    created_at = Column(DateTime, default=datetime.utcnow)

class Course(Base):
    __tablename__ = 'courses'

    id = Column(Integer, primary_key=True, autoincrement=True)
    code = Column(String(20), unique=True, nullable=False)
    name = Column(String(255), nullable=False)
    name_fa = Column(String(255), nullable=False)
    department_id = Column(Integer, ForeignKey('departments.id'), nullable=False)
    course_type = Column(Enum(CourseType), nullable=False)
    credits = Column(Float, nullable=False)
    hours = Column(Integer, nullable=False)  # ØªØ¹Ø¯Ø§Ø¯ Ø³Ø§Ø¹Ø§Øª
    prerequisites = Column(JSON)  # Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§
    description = Column(Text)
    objectives = Column(JSON)
    syllabus = Column(JSON)
    status = Column(Enum(CourseStatus), default=CourseStatus.ACTIVE)
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

    # Relationships
    department = relationship("Department", back_populates="courses")
    offerings = relationship("CourseOffering", back_populates="course")

class CourseOffering(Base):
    __tablename__ = 'course_offerings'

    id = Column(Integer, primary_key=True, autoincrement=True)
    course_id = Column(Integer, ForeignKey('courses.id'), nullable=False)
    semester_id = Column(Integer, ForeignKey('semesters.id'), nullable=False)
    instructor_id = Column(Integer, ForeignKey('employees.id'))
    capacity = Column(Integer, nullable=False)
    enrolled_count = Column(Integer, default=0)
    classroom = Column(String(100))
    schedule = Column(JSON)  # Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ú©Ù„Ø§Ø³
    exam_date = Column(DateTime)
    exam_location = Column(String(100))
    is_active = Column(Boolean, default=True)
    created_at = Column(DateTime, default=datetime.utcnow)

    # Relationships
    course = relationship("Course", back_populates="offerings")
    semester = relationship("Semester")
    instructor = relationship("Employee")
    enrollments = relationship("CourseEnrollment", back_populates="offering")

class CourseEnrollment(Base):
    __tablename__ = 'course_enrollments'

    id = Column(Integer, primary_key=True, autoincrement=True)
    student_id = Column(Integer, ForeignKey('students.id'), nullable=False)
    offering_id = Column(Integer, ForeignKey('course_offerings.id'), nullable=False)
    enrollment_date = Column(DateTime, default=datetime.utcnow)
    status = Column(Enum('ENROLLED', 'DROPPED', 'COMPLETED', 'FAILED', name='enrollment_status'))
    grade = Column(String(5))
    grade_points = Column(Float)
    is_active = Column(Boolean, default=True)

    # Relationships
    student = relationship("Student", back_populates="enrollments")
    offering = relationship("CourseOffering", back_populates="enrollments")

class Grade(Base):
    __tablename__ = 'grades'

    id = Column(Integer, primary_key=True, autoincrement=True)
    student_id = Column(Integer, ForeignKey('students.id'), nullable=False)
    course_id = Column(Integer, ForeignKey('courses.id'), nullable=False)
    semester_id = Column(Integer, ForeignKey('semesters.id'), nullable=False)
    grade = Column(String(5), nullable=False)
    grade_points = Column(Float, nullable=False)
    status = Column(Enum('FINAL', 'MIDTERM', 'PROVISIONAL', name='grade_status'))
    entered_by_id = Column(Integer, ForeignKey('employees.id'))
    entered_at = Column(DateTime, default=datetime.utcnow)
    notes = Column(Text)

    # Relationships
    student = relationship("Student", back_populates="grades")
    course = relationship("Course")
    semester = relationship("Semester")
    entered_by = relationship("Employee")
```

Ø§ÛŒÙ† Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø´Ø§Ù…Ù„ ØªÙ…Ø§Ù…ÛŒ Ø¬Ù†Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªØ§Ø± Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡ÛŒ Ø§ÛŒØ±Ø§Ù† Ù‡Ø³ØªÙ†Ø¯ Ùˆ Ø¨Ø±Ø§ÛŒ Ù…Ù‚ÛŒØ§Ø³ Ø¨Ø§Ù„Ø§ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.
