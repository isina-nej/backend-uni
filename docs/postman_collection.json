{
	"info": {
		"_postman_id": "university-mgmt-system",
		"name": "🎓 University Management System",
		"description": "Collection کامل API های سیستم مدیریت دانشگاهی\n\n## نکات مهم:\n- ابتدا از endpoint Login استفاده کنید\n- Token دریافتی را در متغیر `auth_token` ذخیره کنید\n- برای تست‌های مختلف از Environment Variables استفاده کنید",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "🔐 Authentication",
			"item": [
				{
					"name": "🔑 Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('auth_token', response.token);",
									"    pm.environment.set('user_id', response.user.id);",
									"    pm.environment.set('user_role', response.user.role);",
									"    console.log('Token saved:', response.token);",
									"}",
									"",
									"pm.test('Login successful', function () {",
									"    pm.response.to.have.status(200);",
									"    pm.expect(pm.response.json()).to.have.property('token');",
									"    pm.expect(pm.response.json()).to.have.property('user');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"{{admin_username}}\",\n    \"password\": \"{{admin_password}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login", ""]
						},
						"description": "ورود به سیستم و دریافت توکن احراز هویت"
					}
				},
				{
					"name": "🚪 Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/logout/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "logout", ""]
						},
						"description": "خروج از سیستم و حذف توکن"
					}
				},
				{
					"name": "👤 Get Profile",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/profile/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "profile", ""]
						},
						"description": "نمایش اطلاعات پروفایل کاربر فعلی"
					}
				},
				{
					"name": "✏️ Update Profile",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"first_name\": \"احمد\",\n    \"last_name\": \"محمدی\",\n    \"email\": \"ahmad@university.edu\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/profile/update/",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "profile", "update", ""]
						},
						"description": "بروزرسانی اطلاعات پروفایل"
					}
				}
			],
			"description": "احراز هویت و مدیریت جلسات کاربری"
		},
		{
			"name": "👥 User Management",
			"item": [
				{
					"name": "📋 List Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/users/?role=student&search=",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "users", ""],
							"query": [
								{
									"key": "role",
									"value": "student",
									"description": "فیلتر بر اساس نقش کاربری"
								},
								{
									"key": "search",
									"value": "",
									"description": "جستجو در نام کاربری و نام"
								}
							]
						},
						"description": "لیست کاربران با امکان فیلتر و جستجو"
					}
				},
				{
					"name": "➕ Create User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"new_student\",\n    \"email\": \"student@university.edu\",\n    \"first_name\": \"علی\",\n    \"last_name\": \"احمدی\",\n    \"role\": \"student\",\n    \"student_id\": \"20250002\",\n    \"department\": \"Computer Science\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/users/",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "users", ""]
						},
						"description": "ایجاد کاربر جدید (فقط ادمین)"
					}
				}
			],
			"description": "مدیریت کاربران و نقش‌ها"
		},
		{
			"name": "📚 Academic - Courses",
			"item": [
				{
					"name": "📖 List Courses",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/courses/courses/?search=&professor=",
							"host": ["{{base_url}}"],
							"path": ["api", "courses", "courses", ""],
							"query": [
								{
									"key": "search",
									"value": "",
									"description": "جستجو در عنوان و کد درس"
								},
								{
									"key": "professor",
									"value": "",
									"description": "فیلتر بر اساس استاد"
								}
							]
						},
						"description": "لیست دروس با امکان فیلتر"
					}
				},
				{
					"name": "➕ Create Course",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"ساختمان داده‌ها\",\n    \"code\": \"CS201\",\n    \"description\": \"مفاهیم پایه ساختمان داده‌ها و الگوریتم‌ها\",\n    \"professor\": 1,\n    \"credits\": 3\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/courses/courses/",
							"host": ["{{base_url}}"],
							"path": ["api", "courses", "courses", ""]
						},
						"description": "ایجاد درس جدید"
					}
				}
			],
			"description": "مدیریت دروس و برنامه‌های درسی"
		},
		{
			"name": "📊 Academic - Grades",
			"item": [
				{
					"name": "📊 List Grades",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/grades/grades/?course=&student=&grade_letter=",
							"host": ["{{base_url}}"],
							"path": ["api", "grades", "grades", ""],
							"query": [
								{
									"key": "course",
									"value": "",
									"description": "فیلتر بر اساس درس"
								},
								{
									"key": "student",
									"value": "",
									"description": "فیلتر بر اساس دانشجو"
								},
								{
									"key": "grade_letter",
									"value": "",
									"description": "فیلتر بر اساس نمره حرفی"
								}
							]
						},
						"description": "مشاهده نمرات با فیلترهای مختلف"
					}
				},
				{
					"name": "➕ Add Grade",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"student\": 1,\n    \"course\": 1,\n    \"score\": 85.5,\n    \"grade_letter\": \"B\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/grades/grades/",
							"host": ["{{base_url}}"],
							"path": ["api", "grades", "grades", ""]
						},
						"description": "ثبت نمره جدید برای دانشجو"
					}
				}
			],
			"description": "مدیریت نمرات و ارزیابی"
		},
		{
			"name": "📢 Communication - Announcements",
			"item": [
				{
					"name": "📢 List Announcements",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/announcements/announcements/?priority=&search=",
							"host": ["{{base_url}}"],
							"path": ["api", "announcements", "announcements", ""],
							"query": [
								{
									"key": "priority",
									"value": "",
									"description": "فیلتر بر اساس اولویت"
								},
								{
									"key": "search",
									"value": "",
									"description": "جستجو در عنوان و محتوا"
								}
							]
						},
						"description": "مشاهده اعلان‌ها بر اساس مخاطب"
					}
				},
				{
					"name": "➕ Create Announcement",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"شروع ترم جدید\",\n    \"content\": \"ترم جدید از تاریخ 1 مهر آغاز می‌شود\",\n    \"target_audience\": \"students\",\n    \"priority\": \"high\",\n    \"expires_at\": null\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/announcements/announcements/",
							"host": ["{{base_url}}"],
							"path": ["api", "announcements", "announcements", ""]
						},
						"description": "انتشار اعلان جدید"
					}
				}
			],
			"description": "مدیریت اعلان‌ها و اخبار"
		},
		{
			"name": "📋 Academic - Assignments",
			"item": [
				{
					"name": "📋 List Assignments",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/assignments/assignments/?course=&search=",
							"host": ["{{base_url}}"],
							"path": ["api", "assignments", "assignments", ""],
							"query": [
								{
									"key": "course",
									"value": "",
									"description": "فیلتر بر اساس درس"
								},
								{
									"key": "search",
									"value": "",
									"description": "جستجو در عنوان تکلیف"
								}
							]
						},
						"description": "مشاهده لیست تکالیف"
					}
				},
				{
					"name": "➕ Create Assignment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"تمرین شماره 1\",\n    \"description\": \"حل مسائل 1 تا 10 از فصل سوم\",\n    \"course\": 1,\n    \"due_date\": \"2025-09-15T23:59:59Z\",\n    \"max_score\": 100.0\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/assignments/assignments/",
							"host": ["{{base_url}}"],
							"path": ["api", "assignments", "assignments", ""]
						},
						"description": "ایجاد تکلیف جدید"
					}
				},
				{
					"name": "📝 List Submissions",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/assignments/submissions/",
							"host": ["{{base_url}}"],
							"path": ["api", "assignments", "submissions", ""]
						},
						"description": "مشاهده پاسخ‌های ارسالی"
					}
				},
				{
					"name": "📤 Submit Assignment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"assignment\": 1,\n    \"content\": \"پاسخ تمرین در اینجا...\",\n    \"file_url\": \"https://example.com/submission.pdf\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/assignments/submissions/",
							"host": ["{{base_url}}"],
							"path": ["api", "assignments", "submissions", ""]
						},
						"description": "ارسال پاسخ تکلیف"
					}
				}
			],
			"description": "مدیریت تکالیف و پروژه‌ها"
		},
		{
			"name": "🏛️ Services - Library",
			"item": [
				{
					"name": "📚 Browse Books",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/library/books/?search=&available=true",
							"host": ["{{base_url}}"],
							"path": ["api", "library", "books", ""],
							"query": [
								{
									"key": "search",
									"value": "",
									"description": "جستجو در عنوان، نویسنده، ISBN"
								},
								{
									"key": "available",
									"value": "true",
									"description": "فقط کتاب‌های موجود"
								}
							]
						},
						"description": "جستجو و مرور کتاب‌های کتابخانه"
					}
				},
				{
					"name": "📖 Borrow Book",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"book\": 1\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/library/borrowings/",
							"host": ["{{base_url}}"],
							"path": ["api", "library", "borrowings", ""]
						},
						"description": "امانت گرفتن کتاب"
					}
				},
				{
					"name": "📜 Borrowing History",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/library/borrowings/",
							"host": ["{{base_url}}"],
							"path": ["api", "library", "borrowings", ""]
						},
						"description": "تاریخچه امانت کتاب‌ها"
					}
				}
			],
			"description": "خدمات کتابخانه"
		},
		{
			"name": "📈 Reports & Analytics",
			"item": [
				{
					"name": "📊 Admin Dashboard",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/reports/dashboard/",
							"host": ["{{base_url}}"],
							"path": ["api", "reports", "dashboard", ""]
						},
						"description": "آمار کلی سیستم (فقط ادمین)"
					}
				},
				{
					"name": "🎓 Student Report",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/reports/student/",
							"host": ["{{base_url}}"],
							"path": ["api", "reports", "student", ""]
						},
						"description": "گزارش عملکرد دانشجو"
					}
				},
				{
					"name": "📚 Course Report",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Token {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/reports/course/{{course_id}}/",
							"host": ["{{base_url}}"],
							"path": ["api", "reports", "course", "{{course_id}}", ""]
						},
						"description": "گزارش عملکرد کلاس"
					}
				}
			],
			"description": "گزارش‌گیری و آنالیتیکس"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-set base URL if not set",
					"if (!pm.environment.get('base_url')) {",
					"    pm.environment.set('base_url', 'http://127.0.0.1:8000');",
					"}",
					"",
					"// Auto-set admin credentials if not set",
					"if (!pm.environment.get('admin_username')) {",
					"    pm.environment.set('admin_username', 'admin');",
					"}",
					"if (!pm.environment.get('admin_password')) {",
					"    pm.environment.set('admin_password', 'admin123');",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Global tests for all requests",
					"pm.test('Response time is reasonable', function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(5000);",
					"});",
					"",
					"pm.test('Response has correct content type', function () {",
					"    if (pm.response.code !== 204) {",
					"        pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
					"    }",
					"});"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://127.0.0.1:8000",
			"type": "string"
		},
		{
			"key": "auth_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "admin_username",
			"value": "admin",
			"type": "string"
		},
		{
			"key": "admin_password",
			"value": "admin123",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "course_id",
			"value": "1",
			"type": "string"
		}
	]
}
